<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0，minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>优惠券页面</title>
  <link rel="stylesheet" href="./css/tabulation.css">
</head>

<body>
<div class="main">
  <img class="coupon" src="./img/newlogo.png" alt="嗨购券">
  <div class="tabulation">

    <div class="draw-lottery ticket" data-sku="CMP384811624327806976">
      <div class="logo"><img src="./img/icon.png" alt="双11抽奖"></div>
      <div class="title">
        <span>双11嗨购抽奖</span>
        <div class="date"><span>2019.11.01-2019.11.07</span></div>
      </div>
      <div class="join activity-join"><span>去参加</span></div>
    </div>
    <div class="activity-item">
      <section>
        <section class="row2">
          <div class="exchange">活动入口：</div>
          <div class="link">点击进入</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>购买双11嗨购券可获得1次抽奖机会，奖品有天猫精灵、优酷/爱奇艺视频会员、10元/20元天猫浙江联通官方旗舰店店铺优惠券等，请于2019年11月7日24：00前通过指定入口参与抽奖，逾期失效。
          </p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="tmall-shopping ticket">
      <div class="price"><span>¥10</span></div>
      <div class="title">
        <span>天猫购物组合券</span>
        <div class="date"><span>2019.11.01-2019.11.11</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384811531931484160">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送)</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：m.jifenh.com/tmyhq</div>
          <div class="link">点击进入</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>
            210元天猫购物组合券含10元天猫购物券及200元天猫满减券（100元日用百货优惠券：满199-100；50元休闲食品优惠券：满99-50；50元个护优惠券：满99-50）。200元天猫满减券在购买双11嗨购券并确认收货后，打开淘宝-红包卡券即可找到并使用。10元天猫购物券使用方式如下：
          </p>
          <p>1、点击上方兑换地址进入充值页面，输入自己的天猫账号以及天猫券券码，点击兑换，您的天猫账号即会出现一张10元天猫购物券，登录淘宝app-我的淘宝-红包卡券-优惠券-购物券即可查看购物券到账情况。
          </p>
          <p>2、10元购物券可在淘宝/天猫APP的天猫普通订单交易、钜划算、淘海外、天猫超市、天猫国际（免税店除外）业务中使用，暂不支持秒杀、预售、聚划算预售、付邮试用、特供宝、分阶段支付的业务使用此购物券。
          </p>
          <p>3、10元天猫购物券可用于单件商品的付款，也可用于购物车合并下单付款，同时支持在跨店铺订单中使用，满10.01元可减10元。</p>
          <p>4、天猫购物券可与商家店铺优惠券及红包叠加使用，付款时默认优先使用店铺优惠券，如使用商家优惠券后金额仍满足天猫购物券使用条件则可继续叠加使用天猫购物券。
          </p>
          <p>5、购物券不得提现，不得转赠他人，不得为他人付，不得拆分使用，不退不换，不提供发票。</p>
          <p>6、一个订单仅限使用一张购物券。</p>
          <p>7、有效期：购物券兑换后请在30天内激活使用。</p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>


    <div class="bill-charge ticket">
      <div class="price"><span>¥10</span></div>
      <div class="title">
        <span>话费充值满减券</span>
        <div class="date"><span>2019.11.01-2019.11.11</span></div>
      </div>
      <div class="activity-join"><span>去参加</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384811257506562048">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：微信侧提供</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换:</div>
          <div class="link">点击进入</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>1、领取资格：10元充值满减券仅限参与购买11.11内购券的浙江联通手机号码用户可领取。</p>
          <p>2、领取时间：自购买11.11内购券次日起可领取，不可转赠。</p>
          <p>3、使用路径：在浙江联通“微信公众号”充值100元及以上使用，不能返现。</p>
          <p>4、注意事项：单次充值只能使用一张，且只能给本微信绑定的“浙江联通”手机号码充值。</p>
          <p>5、有效期：话费满减券自购买11.11内购券次日起可自领取到卡包之日起至2019年11月11日23:59前使用有效，请在有效期内使用。</p>

        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="purchasing-machine ticket">
      <div class="price"><span>¥500</span></div>
      <div class="title">
        <span>购机优惠券</span>
        <div class="date"><span>2019.11.01-2019.11.11</span></div>
        <div class="footer"><span>（仅限网上营业厅使用)</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384811396551933952">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送）</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：https://m.10010.com</div>
          <div class="link">点击进入</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>购机优惠券可在浙江联通网上营业厅购买vivo NEX3
            5G版（8GB+256GB）机型时使用，以上优惠券购手机只能每张单独使用，不能几张叠加使用；不与招联免息叠加享受。其他规则以手机实际购买页面规则为准。
          </p>
        </section>

        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="purchasing-machine ticket">
      <div class="price"><span>¥300</span></div>
      <div class="title">
        <span>购机优惠券</span>
        <div class="date"><span>2019.11.01-2019.11.11</span></div>
        <div class="footer"><span>（仅限网上营业厅使用)</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384811333977112576">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送)</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：https://m.10010.com</div>
          <div class="link">点击进入</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>购机优惠券可在浙江联通网上营业厅购买vivo
            X27(8GB+128GB)机型时使用，以上优惠券购手机只能每张单独使用，不能几张叠加使用；不与招联免息叠加享受。其他规则以手机实际购买页面规则为准。
          </p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="purchasing-machine ticket">
      <div class="price"><span>¥200</span></div>
      <div class="title">
        <span>购机优惠券</span>
        <div class="date"><span>2019.11.01-2019.11.11</span></div>
        <div class="footer"><span>（仅限网上营业厅使用)</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384811257506562048">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送）</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：https://m.10010.com</div>
          <div class="link">点击进入</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>购机优惠券可在浙江联通网上营业厅购买vivo
            Y3（6GB+128GB）时使用，以上优惠券购手机只能每张单独使用，不能几张叠加使用；不与招联免息叠加享受。其他规则以手机实际购买页面规则为准。
          </p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="purchasing-machine ticket">
      <div class="price"><span>¥500</span></div>
      <div class="title">
        <span>购机优惠券</span>
        <div class="date"><span>2019.11.09-2019.11.11</span></div>
        <div class="footer"><span>（仅限网上营业厅使用)</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384811166603411456">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送）</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：指定联通营业厅</div>
          <div class="link">点击查看</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>
            购机优惠券可在指定联通营业厅购买零售价4998元以上手机（不含iPhone手机，iPhone参加活动机型需零售价9000元以上）时使用，以上优惠券购手机只能每张单独使用，不能几张叠加使用；不与招联免息叠加享受。购买华为mate30（5G版）需预存200元话费。
          </p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="purchasing-machine ticket">
      <div class="price"><span>¥300</span></div>
      <div class="title">
        <span>购机优惠券</span>
        <div class="date"><span>2019.11.09-2019.11.11</span></div>
        <div class="footer"><span>（仅限网上营业厅使用)</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384811027537068032">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送）</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：指定联通营业厅</div>
          <div class="link">点击查看</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>购机优惠券可在指定联通营业厅购买Reno(6+256)/ vivo X27系列及零售价2998元以上手机（不含小米手机, 不含iPhone 11 Pro
            64G）时使用，以上优惠券购手机只能每张单独使用，不能几张叠加使用；不与招联免息叠加享受。购买华为mate30（5G版）需预存200元话费。</p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="purchasing-machine ticket">
      <div class="price"><span>¥200</span></div>
      <div class="title">
        <span>购机优惠券</span>
        <div class="date"><span>2019.11.09-2019.11.11</span></div>
        <div class="footer"><span>（仅限网上营业厅使用)</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384810926223654912">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送）</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：指定联通营业厅</div>
          <div class="link">点击查看</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>购机优惠券可在指定联通营业厅购买OPPO A9x(6+128)/ vivo Y3
            (6+128)及零售价1998元以上手机（不含小米手机）时使用，以上优惠券购手机只能每张单独使用，不能几张叠加使用；不与招联免息叠加享受。购买华为mate30（5G版）需预存200元话费。
          </p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>

    <div class="purchasing-machine ticket">
      <div class="price"><span>100M</span></div>
      <div class="title">
        <span>100M宽带提速至200M</span>
        <div class="date"><span>2019.11.09-2019.11.11</span></div>
        <div class="footer"><span>（仅限指定联通营业厅使用）</span></div>
      </div>
      <div class="activity-join"><span>领取</span></div>
    </div>
    <div class="activity-item" data-sku="CMP384810708228898816">
      <section>
        <section class="row1">
          <div class="coupon-code">券码：XXXX（后台推送）</div><div class="copy">复制券码</div>
        </section>
        <section class="row2">
          <div class="exchange">兑换地址：指定联通营业厅</div>
          <div class="link">点击查看</div>
        </section>
        <section class="rule">
          <h4>使用说明</h4>
          <p>1、本活动仅限联通自有光纤资源覆盖到户的100M宽带用户参与，老用户可在符合活动规则的情况下提速至200M，新用户可先办理联通光宽带业务后参与翻倍提速活动，提速期限为1年。
          </p>
          <p>2、宽带速率翻倍特权兑换时间：2019年11月1日-11月11日，过期无效。
          </p>
          <p>
            3、活动特别说明：若用户现有光猫设备端口不支持200M速率接入，升速后实际使用速率将低于200M，用户可按100元/台的优惠价升级购买联通千兆接入光猫终端（家庭智能网关设备）。如果是用户自有其他设备或家庭内部网络问题导致宽带速率未达标，浙江联通不因此产生违约责任。
          </p>
        </section>
        <div class="pack activity-pack">
          <div class="pack-up">收起</div>
          <div class="pack-img">
            <img src="./img/pack.png" alt="收起">
          </div>
        </div>
      </section>
    </div>
    <div class="rate-flow">
      <img src="./img/5Gbanner.png" alt="5G套餐">
    </div>
  </div>
  <div class="loading">
    <div class="pop">
        <img src="./img/loading.gif" alt="正在加载">
    </div>
  </div>
</div>

<script src="./js/jquery.min.js"></script>
<script src="./js/index.js"></script>
<script>
//url配置
var urlSearch = window.location.search
let params = new URLSearchParams(urlSearch)
var getToken = params.get('token')
//把token和localstorage里的信息对比。
var token = window.localStorage.getItem('token') ? window.localStorage.getItem('token') : getToken
$(document).ready(function(){
  getData()
})

function getData () {
  var status = {
    success: '0000',
    loading:'4000',
    auth:'4001',
    error:'9999'
  }
  $.get(url + '/coupon/double11/collect/load/' + token).done(
    function (res) {
      var interval = setInterval(function () {
        getData()
      }, 4000)
      res.code === status.loading ? insertData(res) :
        res.code === status.success? insertDone(interval):
          window.location.href = "index.html"
    }
  )
}


function insertData (res) {
  $('.loading').css('display','none')
  let temp = res.data
  //for循环遍历temp[i]数组。
  for (let i = 0; i < 10; i++) {
    //立即执行函数。
    (function (item) {
      $(`[data-sku=${item.sku}]`).find('.coupon-code').text('' + 
        item.couponCode === null? '处理中': item.couponCode)
    })(temp[i])
  }
}

function insertDone (interval) {
  $('.loading').css('display','none')
  clearInterval(interval)
}

//$.each遍历copy元素
$('.copy').each(function (index) {
  $(this).on('click', function () {
    var couponVal = $('.coupon-code')[index].innerText
    copyCode(couponVal)
  })
})
//复制功能实现
function copyCode (val) {
  var input = document.createElement('input')
  //设置input type属性。
  input.setAttribute('readonly', 'readonly')
  input.setAttribute('value', val)
  document.body.appendChild(input)
  input.select()
  if (document.execCommand('copy')) {
    document.execCommand('copy')
    alert('复制成功')
  }
}

var urlList = [
  'https://zj10010.tmall.com/shop/view_shop.htm',
  'm.jifenh.com/tmyhq',
  'https://m.10010.com/subjectpage/63600000371340.html',
  'https://m.10010.com/subjectpage/63600000371340.html',
  'https://m.10010.com/subjectpage/63600000371340.html',
  'http://iservice.10010.com/e4/internationlRoam/index.html',
  'http://iservice.10010.com/e4/internationlRoam/index.html',
  'http://iservice.10010.com/e4/internationlRoam/index.html',
  'http://iservice.10010.com/e4/internationlRoam/index.html'
]
$('.activity-item').each(function (index) {
  $(this).find('.link').on('click', function () {
    window.location.href = urlList[index]
  })
})

$('.activity-join').each(function (index) {
  $(this).on('click', function () {
    $('.activity-item')[index].style = 'display: block'
  })
})

$('.activity-pack').each(function (index) {
  $(this).on('click', function () {
    $('.activity-item')[index].style = 'display: none'
  })
})

$('.rate-flow').on('click',function(){
  window.location.href = "https://u.10010.cn/5Gn"
})
</script>
</body>

</html>
